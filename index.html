<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>SATSUME JUMP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Rajdhani:wght@400;600&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
body{background:linear-gradient(#0b1220,#02050c);font-family:'Rajdhani',Arial,sans-serif;overflow:hidden}
#game{width:100vw;height:100vh;position:relative;display:none;overflow:hidden}
#city-bg{position:absolute;inset:0;background:url('satsume-city-bg.png') repeat-x bottom/cover;animation:cityScroll 40s linear infinite;filter:brightness(.7);z-index:0}
@keyframes cityScroll{from{background-position-x:0}to{background-position-x:-3000px}}
#ground{position:absolute;bottom:0;width:100%;height:90px;background:linear-gradient(#1e293b,#020617);z-index:2}
#player{position:absolute;bottom:90px;left:80px;width:80px;height:96px;background:url('satsume-sprite.png') center/80px 96px no-repeat;image-rendering:pixelated;z-index:3}
.obstacle{position:absolute;bottom:82px;z-index:3}
.rock{width:100px;height:100px;background:url('rock-sprite.png') center bottom/contain no-repeat}
.bush{width:80px;height:50px;background:url('bush-sprite.png') center/contain no-repeat}
.tree{width:96px;height:160px;background:url('tree-sprite.png') center bottom/contain no-repeat}
.laser{width:80px;height:80px;background:url('laser-sprite.png') center/contain no-repeat;filter:drop-shadow(0 0 12px red)}
.coin{width:40px;height:40px;background:url('coin-sprite.png') center/contain no-repeat;position:absolute;z-index:3;animation:spin 1s linear infinite}
@keyframes spin{from{transform:rotateY(0deg)}to{transform:rotateY(360deg)}}
#score,#level,#highScore,#nusd{font-family:'Orbitron',sans-serif;letter-spacing:1px;text-shadow:0 0 8px rgba(56,189,248,.8)}
#score{top:20px;left:20px;font-size:20px;color:#fff;position:absolute}
#highScore{top:50px;left:20px;font-size:16px;color:#22d3ee;position:absolute}
#level{top:80px;left:20px;font-size:16px;color:#a5f3fc;position:absolute}
#nusd{top:110px;left:20px;font-size:16px;color:#facc15;position:absolute}
#gameOver{font-family:'Orbitron',sans-serif;display:none;position:absolute;inset:0;background:rgba(0,0,0,.85);color:#fff;align-items:center;justify-content:center;flex-direction:column;font-size:32px}
#gameOver button{margin-top:20px;padding:14px 30px;font-size:18px;border:none;border-radius:999px;background:#22d3ee;cursor:pointer}
#splash{text-align:center;position:fixed;inset:0;background:radial-gradient(circle at top,#0ea5e9,#02050c);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10}
#splash .logo{font-family:'Orbitron',sans-serif;text-transform:uppercase;font-size:72px;font-weight:900;letter-spacing:4px}
#splash .subtitle{font-family:'Orbitron',sans-serif;letter-spacing:6px;font-size:30px;color:#38bdf8;margin-bottom:40px}
#splash .logo-img{width:160px;height:auto;margin-bottom:20px;filter:drop-shadow(0 0 12px rgba(56,189,248,.8))}
#splash button{padding:18px 42px;font-size:22px;border-radius:999px;border:none;background:linear-gradient(135deg,#22d3ee,#0ea5e9);font-weight:bold;cursor:pointer}
</style>
</head>
<body>
<div id="splash">
  <img src="satsume-logo.png" alt="SATSUME Logo" class="logo-img">
  <div class="logo">SATSUME</div>
  <div class="subtitle">JUMP</div>
  <button id="startBtn">START</button>
</div>
<div id="game">
  <div id="city-bg"></div>
  <div id="score">Score: 0</div>
  <div id="highScore">High Score: 0</div>
  <div id="level">Level: 1</div>
  <div id="nusd">NUSD: 0</div>
  <div id="player"></div>
  <div id="ground"></div>
  <div id="gameOver"><div>GAME OVER</div><button id="restartBtn">PLAY AGAIN</button></div>
</div>

<audio id="jumpSfx" src="jump.wav" preload="auto" playsinline></audio>
<audio id="coinSfx" src="coin.wav" preload="auto" playsinline></audio>
<audio id="gameOverSfx" src="gameover.wav" preload="auto" playsinline></audio>
<audio id="bgmSplash" src="bgm-splash.mp3" loop preload="auto" playsinline></audio>
<audio id="bgmGame" src="bgm-game.mp3" loop preload="auto" playsinline></audio>

<script>
const player=document.getElementById('player');
const splash=document.getElementById('splash');
const game=document.getElementById('game');
const scoreText=document.getElementById('score');
const levelText=document.getElementById('level');
const nusdText=document.getElementById('nusd');
const gameOverScreen=document.getElementById('gameOver');
const highScoreText=document.getElementById('highScore');
const startBtn=document.getElementById('startBtn');
const restartBtn=document.getElementById('restartBtn');

const jumpSfx=document.getElementById('jumpSfx');
const coinSfx=document.getElementById('coinSfx');
const gameOverSfx=document.getElementById('gameOverSfx');
const bgmSplash=document.getElementById('bgmSplash');
const bgmGame=document.getElementById('bgmGame');

let audioUnlocked=false;
function unlockAudio(){
  if(audioUnlocked) return;
  [jumpSfx,coinSfx,gameOverSfx,bgmSplash,bgmGame].forEach(a=>{
    a.volume=0.4;
    a.currentTime=0;
    a.play().then(()=>{a.pause();a.currentTime=0}).catch(()=>{});
  });
  audioUnlocked=true;
}

function playSplashBgm(){
  if(!audioUnlocked) return;
  if(!bgmSplash.paused) return;
  bgmSplash.currentTime=0;
  bgmSplash.volume=0.35;
  bgmSplash.play().catch(()=>{});
}

splash.addEventListener('pointerdown',()=>{
  unlockAudio();
  playSplashBgm();
},{once:true});

bgmSplash.volume=0.35;
bgmGame.volume=0.35;

let highScore=parseInt(localStorage.getItem('satsumeHighScore')||'0');
highScoreText.textContent='High Score: '+highScore;
let velocityY=0,gravity=1.1;
let obstacles=[],coins=[];
let score=0;
scoreText.textContent='Score: '+score;
let level=1;
levelText.textContent='Level: '+level;
let nusd=parseInt(localStorage.getItem('satsumeNUSD')||'0');
nusdText.textContent='NUSD: '+nusd;
let obstaclePassedCount=0;
let isMobile=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
let speed=isMobile?4.5:6;
let gameOver=false;
let obstacleTimer=null;
let jumpCount=0;
const maxJump=2,firstJump=22,secondJump=18;

function jump(){
  unlockAudio();
  if(gameOver) return;
  if(jumpCount<maxJump){
    velocityY=jumpCount===0?firstJump:secondJump;
    jumpCount++;
    jumpSfx.currentTime=0;
    jumpSfx.play().catch(()=>{});
  }
}

document.addEventListener('keydown',e=>{if(e.code==='Space') jump();});
document.addEventListener('touchstart',jump);

function getRandomObstacle(){
  const pool=['rock','bush'];
  if(level>=2) pool.push('tree');
  if(level>=3) pool.push('laser');
  return pool[Math.floor(Math.random()*pool.length)];
}

function spawnObstacle(){
  const o=document.createElement('div');
  o.className='obstacle '+getRandomObstacle();
  o.style.left=game.offsetWidth+'px';
  o.style.bottom=o.classList.contains('laser')?(120+Math.random()*160)+'px':'90px';
  game.appendChild(o);
  obstacles.push(o);

  if(Math.random()<0.85){
    const coinCount=1+Math.floor(Math.random()*3);
    for(let i=0;i<coinCount;i++){
      const c=document.createElement('div');
      c.className='coin';
      c.style.left=(game.offsetWidth+80+Math.random()*160+i*50)+'px';
      c.style.bottom=(140+Math.random()*220)+'px';
      game.appendChild(c);
      coins.push(c);
    }
  }
}

function startObstacleTimer(){
  clearTimeout(obstacleTimer);
  if(gameOver) return;
  const randomDelay=800+Math.random()*1200;
  obstacleTimer=setTimeout(()=>{spawnObstacle();startObstacleTimer();},randomDelay);
}

function update(){
  if(gameOver) return;
  let bottom=parseInt(player.style.bottom||90);
  bottom+=velocityY;
  velocityY-=gravity;
  if(bottom<=90){bottom=90;jumpCount=0;}
  player.style.bottom=bottom+'px';

  for(let i=obstacles.length-1;i>=0;i--){
    const o=obstacles[i];
    o.style.left=parseInt(o.style.left)-speed+'px';
    const p=player.getBoundingClientRect(),b=o.getBoundingClientRect();
    const pS=14,oS=12;
    if(p.right-pS>b.left+oS&&p.left+pS<b.right-oS&&p.bottom-pS>b.top+oS&&p.top+pS<b.bottom-oS) endGame();
    if(parseInt(o.style.left)<-200){
      o.remove();
      obstacles.splice(i,1);
      score++;
      scoreText.textContent='Score: '+score;
      localStorage.setItem('satsumeScore',score);
      obstaclePassedCount++;
      if(obstaclePassedCount%25===0){
        level++;
        levelText.textContent='Level: '+level;
      }
    }
  }

  for(let i=coins.length-1;i>=0;i--){
    const c=coins[i];
    c.style.left=parseInt(c.style.left)-speed+'px';
    const p=player.getBoundingClientRect(),b=c.getBoundingClientRect();
    const pS=18,cS=8;
    if(p.right-pS>b.left+cS&&p.left+pS<b.right-cS&&p.bottom-pS>b.top+cS&&p.top+pS<b.bottom-cS){
      c.remove();coins.splice(i,1);nusd++;nusdText.textContent='NUSD: '+nusd;localStorage.setItem('satsumeNUSD',nusd);
      coinSfx.currentTime=0;coinSfx.play().catch(()=>{});
    } else if(parseInt(c.style.left)<-100){c.remove();coins.splice(i,1);}
  }
  requestAnimationFrame(update);
}

function endGame(){
  if(gameOver) return;
  gameOver=true;
  gameOverSfx.currentTime=0;
  gameOverSfx.play().catch(()=>{});
  bgmGame.pause();
  bgmSplash.pause();
  if(score>highScore){highScore=score;localStorage.setItem('satsumeHighScore',highScore);highScoreText.textContent='High Score: '+highScore;}
  gameOverScreen.style.display='flex';
}

function startGame(){
  splash.style.display='none';
  game.style.display='block';
  bgmSplash.pause();
  bgmGame.currentTime=0;
  bgmGame.play().catch(()=>{});
  startObstacleTimer();
  requestAnimationFrame(update);
}

startBtn.onclick=()=>{unlockAudio();startGame();};
restartBtn.onclick=()=>location.reload();
</script>
</body>
</html>

